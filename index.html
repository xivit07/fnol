<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Amelia Chat Overlay</title>

<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600" rel="stylesheet">

<style>
/* IMPORTANT: make sure background.png exists in the SAME folder as this HTML file */
html, body{
  height:100%;
}

body{
  margin:0;
  min-height:100vh;
  font-family:"Open Sans", Arial, sans-serif;

  background-color:#ffffff;                 /* fallback */
  background-image:url("./background.png"); /* adjust path if needed */
  background-repeat:no-repeat;
  background-position:center center;
  background-size:cover;
}

/* === CHAT OVERLAY === */
.chat-overlay{
  position:fixed;
  right:12px;
  bottom:12px;
  z-index:9999;
}

/* === CHAT WINDOW === */
.chat-window{
  width:360px;
  height:520px;
  margin-bottom:8px;
  background:#fff;
  border-radius:10px;
  overflow:hidden;
  box-shadow:0 10px 30px rgba(0,0,0,.25);
}

#receiver{
  width:100%;
  height:100%;
  border:0;
}

/* === LAUNCHER BUTTON === */
.chat-launcher{
  display:flex;
  align-items:center;
  gap:8px;
  height:36px;
  padding:0 12px;
  background:#b5121b;
  color:#fff;
  border:none;
  border-radius:4px;
  cursor:pointer;
  font-size:14px;
  font-weight:600;
  box-shadow:0 6px 16px rgba(0,0,0,.2);
}

.chat-icon{
  display:flex;
  align-items:center;
  justify-content:center;
  width:22px;
  height:22px;
  border:1px solid rgba(255,255,255,.5);
  border-radius:3px;
  font-size:13px;
}

/* === CLOSED STATE === */
.chat-closed .chat-window{
  display:none;
}

/* === MOBILE === */
@media (max-width:768px){
  .chat-window{
    width:calc(100vw - 24px);
    height:70vh;
  }
}
</style>
</head>

<body>

<div class="chat-overlay chat-closed" id="chatOverlay">

  <div class="chat-window">
    <iframe
      id="receiver"
      src="https://showcase.amelia.com/Amelia/ui/fnol/chat?domain=fnol"
      allow="geolocation; microphone; camera">
    </iframe>
  </div>

  <button class="chat-launcher" id="chatLauncher" type="button">
    <span>Chat with us</span>
    <span class="chat-icon">ðŸ’¬</span>
  </button>

</div>

<script>
const overlay = document.getElementById("chatOverlay");
const launcher = document.getElementById("chatLauncher");

launcher.onclick = () => {
  const closed = overlay.classList.contains("chat-closed");
  overlay.classList.toggle("chat-closed", !closed);
  localStorage.setItem("chatOpen", String(closed));
};

if (localStorage.getItem("chatOpen") === "true") {
  overlay.classList.remove("chat-closed");
}
</script>

</body>
</html>
