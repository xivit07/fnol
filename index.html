<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Amelia Chat Overlay</title>

<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600" rel="stylesheet">

<style>
/* ===== FULL IMAGE BACKGROUND (NO CROP) ===== */
html, body { height: 100%; }

body{
  margin:0;
  font-family:"Open Sans", Arial, sans-serif;

  background-color:#ffffff;                 /* fills empty space */
  background-image:url("./background.png"); /* adjust path if needed */
  background-repeat:no-repeat;
  background-position:center center;
  background-size:contain;                  /* FULL image visible */
}

/* ===== CHAT OVERLAY ===== */
.chat-overlay{
  position:fixed;
  right:16px;
  bottom:16px;
  z-index:9999;
}

/* ===== BIGGER CHAT WINDOW ===== */
.chat-window{
  width:460px;       /* bigger */
  height:660px;      /* bigger */
  margin-bottom:10px;

  background:#fff;
  border-radius:12px;
  overflow:hidden;
  box-shadow:0 14px 40px rgba(0,0,0,.3);

  transform: translateY(12px);
  opacity: 0;
  transition: transform .25s ease, opacity .25s ease;
}

#receiver{
  width:100%;
  height:100%;
  border:0;
}

/* open state animation */
.chat-open .chat-window{
  transform: translateY(0);
  opacity: 1;
}

/* ===== LAUNCHER BUTTON ===== */
.chat-launcher{
  display:flex;
  align-items:center;
  gap:10px;
  height:40px;
  padding:0 14px;
  background:#b5121b;
  color:#fff;
  border:none;
  border-radius:4px;
  cursor:pointer;
  font-size:15px;
  font-weight:600;
  box-shadow:0 8px 20px rgba(0,0,0,.25);
}

.chat-icon{
  display:flex;
  align-items:center;
  justify-content:center;
  width:24px;
  height:24px;
  border:1px solid rgba(255,255,255,.5);
  border-radius:3px;
  font-size:14px;
}

/* closed state hides window */
.chat-closed .chat-window{ display:none; }

/* ===== MOBILE ===== */
@media (max-width:768px){
  .chat-overlay{ right:12px; bottom:12px; }
  .chat-window{
    width:calc(100vw - 24px);
    height:80vh;
  }
}
</style>
</head>

<body>

<div class="chat-overlay chat-closed" id="chatOverlay">

  <div class="chat-window">
    <iframe
      id="receiver"
      src="https://showcase.amelia.com/Amelia/ui/fnol/chat?domain=fnol"
      allow="geolocation; microphone; camera">
    </iframe>
  </div>

  <button class="chat-launcher" id="chatLauncher" type="button">
    <span>Chat with us</span>
    <span class="chat-icon">ðŸ’¬</span>
  </button>

</div>

<script>
const overlay = document.getElementById("chatOverlay");
const launcher = document.getElementById("chatLauncher");

function setOpen(isOpen){
  overlay.classList.toggle("chat-closed", !isOpen);
  overlay.classList.toggle("chat-open", isOpen);
  localStorage.setItem("chatOpen", String(isOpen));
}

launcher.onclick = () => {
  const isOpen = overlay.classList.contains("chat-closed");
  setOpen(isOpen);
};

setOpen(localStorage.getItem("chatOpen") === "true");
</script>

</body>
</html>
